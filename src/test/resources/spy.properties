# ============================================
# P6Spy Configuration for SQL Logging & Debugging
# ============================================
# This file is activated only in the test profile.
# It controls how P6Spy logs and formats SQL queries.
# ============================================

# Logging module configuration
# P6LogFactory: Default logging implementation using SLF4J
modulename=com.p6spy.engine.logging.P6LogFactory

# ============================================
# Log Message Formatting Configuration
# ============================================

# Custom SQL formatter class
# Formats complete SQL statements with bound parameters in a readable format
# Example: "insert into users (...) values ('user@example.com', ...)"
logMessageFormat=com.hhplus.ecommerce.infrastructure.config.P6SpyPrettySqlFormatter

# Timestamp format configuration
# Adds timestamp information to SQL logs (e.g., 2024-11-13 14:30:45)
dateformat=yyyy-MM-dd HH:mm:ss

# ============================================
# Database Driver Configuration
# ============================================

# Actual database driver specification
# P6Spy wraps this driver to intercept SQL statements
# Must match the driver used in application-test.yml
driverlist=com.mysql.cj.jdbc.Driver

# ============================================
# Log Output Configuration
# ============================================

# Enable multi-line SQL output
# Formats complex queries across multiple lines for better readability
multiline=true

# SQL execution time threshold setting (milliseconds)
# 0: Log all queries (recommended)
# >0: Log only queries that take longer than the specified time
executionThreshold=0

# ============================================
# Filtering Configuration (Optional)
# ============================================

# Enable/disable filtering
# true: Can exclude specific query patterns
filter=true

# Query pattern to exclude (regex)
# Excludes setObject method calls from logs
# (Removes PreparedStatement binding process logs)
exclude=.*\.setObject.*

# Query pattern to include (regex)
# Empty: Logs all queries except excluded patterns
include=

# ============================================
# Notes
# ============================================
# - logMessageFormat is linked with Bean in P6SpyConfig.java
# - Formatting logic is implemented in P6SpyPrettySqlFormatter
# - Log level is controlled by logging.level.p6spy in application-test.yml
# ============================================
